<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>script.aculo.us Ghost Train proof of concept</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <script src="../lib/prototype.js" type="text/javascript"></script>
  <script src="../src/unittest.js" type="text/javascript"></script>
  <script src="../src/util.js" type="text/javascript"></script>
  <script src="ghosttrain.js" type="text/javascript"></script>
  <script src="../src/effects.js" type="text/javascript"></script>
  <script src="../src/dragdrop.js" type="text/javascript"></script>
  <script src="../src/controls.js" type="text/javascript"></script>
  <link rel="stylesheet" href="../test/test.css" type="text/css" />
  <link rel="stylesheet" href="ghosttrain.css" type="text/css" />
</head>
<body>
<h1>script.aculo.us Ghost Train</h1>
<p>
  Currently, firefox only. This is in a very very alpha state, so don't expect to much now. â€” <span style="color:red">you've been warned!</span>
</p>
<h2>Usage</h2>
<p>
  Ghost Train is activated by pressing ESC. You will see the Ghost Train window popping up.
</p>

<div id="puzzle">
   <img id="image_5" src="http://script.aculo.us/images/puzzle5.jpg" alt="" />
   <img id="image_1" src="http://script.aculo.us/images/puzzle1.jpg" alt="" />
   <img id="image_9" src="http://script.aculo.us/images/puzzle9.jpg" alt="" />      
   <img id="image_7" src="http://script.aculo.us/images/puzzle7.jpg" alt="" />
   <img id="image_4" src="http://script.aculo.us/images/puzzle4.jpg" alt="" />
   <img id="image_8" src="http://script.aculo.us/images/puzzle8.jpg" alt="" />
   <img id="image_3" src="http://script.aculo.us/images/puzzle3.jpg" alt="" />
   <img id="image_6" src="http://script.aculo.us/images/puzzle6.jpg" alt="" />
   <img id="image_2" src="http://script.aculo.us/images/puzzle2.jpg" alt="" />
 </div>
 <p>
    <span id="puzzleinfo">(no move made yet)</span>
 </p>

 <script type="text/javascript" language="javascript">
 // <![CDATA[
   Sortable.create("puzzle",
     {tag:'img',overlap:'horizontal',constraint: false,
      onUpdate:function(){
        p = $("puzzle");
        p.moves = p.moves || 0;
        p.moves++;
        $('puzzleinfo').innerHTML = 
          "You've made " + p.moves + " move" + 
          (p.moves>1 ? "s" : "");
        if(Sortable.serialize("puzzle")==
           "puzzle[]=1&puzzle[]=2&puzzle[]=3&" +
           "puzzle[]=4&puzzle[]=5&puzzle[]=6&" +
           "puzzle[]=7&puzzle[]=8&puzzle[]=9") {
           $('puzzleinfo').innerHTML = 
             "You've solved the puzzle in " + p.moves + " moves!";
           Element.Class.add('puzzleinfo','congrats');
        }
      }
    })
 // ]]>
 </script>
 
<!-- Log output -->
<div id="testlog"> </div>

</body>
</html>